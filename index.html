<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Subtly — Vocabulary Collector</title>
    <link
      rel="icon"
      type="image/png"
      href="/favicon/favicon-96x96.png"
      sizes="96x96"
    />
    <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
    <link rel="shortcut icon" href="/favicon/favicon.ico" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/favicon/apple-touch-icon.png"
    />
    <link rel="manifest" href="/favicon/site.webmanifest" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app" role="application">
      <header>
        <div class="mark">S</div>
        <div class="header-text">
          <div class="title">Subtly</div>
          <div class="subtitle">
            Collect words from subtitles — elegant, minimal, modern
          </div>
        </div>
      </header>
      <div class="top-controls">
        <div class="search">
          <svg
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
          >
            <path
              d="M21 21l-4.35-4.35"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            ></path>
            <circle cx="11" cy="11" r="6" stroke-width="1.5"></circle>
          </svg>
          <input
            id="searchInput"
            placeholder="Search by word or timestamp..."
          />
          <button
            id="searchClearBtn"
            class="search-clear-btn"
            title="Clear search"
          >
            &times;
          </button>
        </div>
        <div class="controls">
          <button id="importSrtBtn" class="btn">
            <span class="icon-holder"></span><span>Import Subtitles</span>
          </button>
          <button id="importJsonBtn" class="btn">
            <span class="icon-holder"></span><span>Import Project</span>
          </button>
          <button id="openHelpBtn" class="btn">
            <span class="icon-holder"></span><span>Help</span>
          </button>
          <button
            id="themeToggleBtn"
            class="btn theme-toggle"
            title="Toggle dark mode"
          >
            <svg
              class="sun-icon"
              xmlns="http://www.w3.org/2000/svg"
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="12" cy="12" r="5"></circle>
              <line x1="12" y1="1" x2="12" y2="3"></line>
              <line x1="12" y1="21" x2="12" y2="23"></line>
              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
              <line x1="1" y1="12" x2="3" y2="12"></line>
              <line x1="21" y1="12" x2="23" y2="12"></line>
              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
            <svg
              class="moon-icon"
              xmlns="http://www.w3.org/2000/svg"
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
          </button>
        </div>
      </div>
      <div class="workspace">
        <aside class="panel left">
          <div class="panel-header">
            <strong>Subtitles</strong
            ><span id="subtitleFilename" class="muted"></span>
          </div>
          <div id="subtitleList" class="subtitle-list" aria-live="polite"></div>
        </aside>
        <main id="editorPanel" class="panel editor is-blank">
          <div id="editorPlaceholder" class="editor-placeholder"></div>
          <div class="editor-form">
            <div class="field">
              <label>Selected Word</label
              ><textarea
                id="wordInput"
                placeholder="Click a word or Shift-click for a phrase"
                rows="1"
              ></textarea>
            </div>
            <div class="field">
              <label>Sentence (editable)</label
              ><textarea
                id="sentenceInput"
                placeholder="Auto-merged from selected parts"
              ></textarea>
            </div>
            <div class="field">
              <label>Meaning</label
              ><textarea
                id="meaningInput"
                placeholder="Add one or multiple meanings"
              ></textarea>
            </div>
            <div class="field">
              <label>Note</label
              ><textarea id="noteInput" placeholder="Add a note..."></textarea>
            </div>
            <div class="save-row">
              <button id="saveWordBtn" class="btn primary">Save Word</button
              ><button id="clearEditorBtn" class="btn">Exit</button>
              <div
                id="timestampDisplay"
                class="muted"
                style="margin-left: auto"
              ></div>
            </div>
          </div>
        </main>
      </div>
      <div class="bottom-bar">
        <div>
          <button id="saveJsonBtn" class="btn">
            <span class="icon-holder"></span><span>Save Project</span>
          </button>
          <button id="exportCsvBtn" class="btn">
            <span class="icon-holder"></span><span>Export CSV</span>
          </button>
          <button id="exportDocBtn" class="btn">
            <span class="icon-holder"></span><span>Export Word</span>
          </button>
        </div>
        <div>
          <span id="wordCounter" class="muted"></span
          ><button id="openPreviewBtn" class="btn">
            <span class="icon-holder"></span><span>Preview List</span>
          </button>
        </div>
      </div>
    </div>

    <div id="previewModal" class="modal-backdrop" aria-hidden="true">
      <div class="modal">
        <div class="modal-header">
          <div class="modal-title-group">
            <strong>Preview — Saved Words</strong>
            <div class="sort-controls">
              <span class="muted">Sort by:</span>
              <button id="sortTimeBtn" class="btn btn-sort">
                <span class="icon-holder"></span><span>Time</span>
              </button>
              <button id="sortAlphaBtn" class="btn btn-sort">
                <span class="icon-holder"></span><span>A-Z</span>
              </button>
            </div>
          </div>
          <button id="closePreviewBtn" class="btn btn-icon"></button>
        </div>
        <div id="previewList" class="list"></div>
      </div>
    </div>

    <div id="helpModal" class="modal-backdrop" aria-hidden="true">
      <div class="modal">
        <div class="modal-header">
          <strong>Help & Shortcuts</strong
          ><button id="closeHelpBtn" class="btn btn-icon"></button>
        </div>
        <div class="list help-content">
          <h4>How to Use Subtly</h4>
          <ol>
            <li>
              <strong>Import Subtitles</strong> using the button at the top.
            </li>
            <li><strong>Select Lines</strong> by checking the boxes.</li>
            <li>
              <strong>Click a Word</strong> or
              <strong><code>Shift+Click</code> a phrase</strong> to start
              editing.
            </li>
            <li><strong>Add a Meaning/Note</strong> and click "Save Word".</li>
            <li><strong>Export</strong> your list for Anki or Word.</li>
          </ol>
          <h4>Keyboard Shortcuts</h4>
          <ul>
            <li><code>Ctrl/Cmd + S</code>: Save word.</li>
            <li><code>Ctrl/Cmd + E</code>: Preview list.</li>
            <li><code>Esc</code>: Clear editor / close modal.</li>
          </ul>
        </div>
      </div>
    </div>

    <div id="confirmModal" class="modal-backdrop" aria-hidden="true">
      <div class="modal modal-small">
        <div class="modal-header"><strong>Confirmation</strong></div>
        <div class="modal-body">
          <p id="confirmMessage">Are you sure?</p>
        </div>
        <div class="modal-footer">
          <button id="cancelBtn" class="btn">Cancel</button>
          <button id="confirmBtn" class="btn btn-danger">Confirm</button>
        </div>
      </div>
    </div>

    <template id="subtitleRowTemplate"
      ><div class="sub-row">
        <div class="sub-meta">
          <input type="checkbox" class="sub-checkbox" />
          <div class="timestamp"></div>
        </div>
        <div class="sub-text"></div></div
    ></template>
    <div id="toastNotification" class="toast"></div>
    <script type="module" src="./js/app.js"></script>
  </body>
</html>
